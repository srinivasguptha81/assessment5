{% extends 'base.html' %}
{% block title %}{{ room }} ‚Äî Classroom Detail{% endblock %}
{% block page_title %}Classroom Detail{% endblock %}

{% block extra_css %}
<style>
  .room-header {
    background: linear-gradient(135deg, var(--ink), #1c1a14);
    border-radius: 14px; padding: 22px 28px;
    display: flex; align-items: center; gap: 20px;
    margin-bottom: 24px;
  }
  .room-badge {
    background: var(--gold); color: var(--ink);
    border-radius: 10px; padding: 10px 16px;
    font-family: 'DM Mono', monospace; font-size: 15px;
    font-weight: 700; flex-shrink: 0;
  }
  .room-header h1 { font-family:'Playfair Display',serif; color:var(--gold); font-size:18px; margin:0 0 4px; }
  .room-header p  { color:rgba(255,255,255,0.5); font-size:12px; margin:0; }

  .amenities-row { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:20px; }
  .amenity-badge {
    display:flex; align-items:center; gap:6px;
    background:white; border:1px solid var(--rule); border-radius:8px;
    padding:7px 12px; font-size:12.5px;
  }

  .course-row {
    display:flex; align-items:center; gap:14px;
    padding:14px 18px; border-bottom:1px solid var(--rule);
    font-size:13px; transition:background 0.15s;
  }
  .course-row:last-child { border-bottom:none; }
  .course-row:hover { background:rgba(247,244,238,0.8); }
  .cr-code { font-family:'DM Mono',monospace; color:var(--gold); font-weight:500; min-width:80px; font-size:12px; }
  .cr-name { flex:1; font-weight:500; }
  .cr-faculty { font-size:12px; color:var(--slate); min-width:160px; }
  .cr-enr { font-size:12px; font-weight:600; color:var(--ink); min-width:60px; text-align:right; }
</style>
{% endblock %}

{% block content %}

<div style="display:flex;align-items:center;gap:12px;margin-bottom:20px;">
  <a href="{% url 'resources:block_detail' room.block.id %}" class="btn-outline" style="font-size:12px;padding:6px 12px;">
    <i class="bi bi-arrow-left"></i> {{ room.block.name }}
  </a>
</div>

<div class="room-header">
  <div class="room-badge">{{ room.block.code }}-{{ room.room_number }}</div>
  <div>
    <h1>{{ room.get_room_type_display }}</h1>
    <p>Capacity: {{ room.capacity }} seats &nbsp;¬∑&nbsp; Currently enrolled: {{ room.current_enrollment }} &nbsp;¬∑&nbsp; Utilization: {{ room.utilization_percent }}%</p>
  </div>
  <div style="margin-left:auto;text-align:center;background:rgba(255,255,255,0.06);border-radius:10px;padding:12px 20px;">
    <div style="font-family:'Playfair Display',serif;font-size:26px;color:
      {% if room.utilization_percent >= 90 %}#ef4444
      {% elif room.utilization_percent >= 70 %}var(--rust)
      {% elif room.utilization_percent >= 40 %}var(--gold)
      {% else %}#16a34a{% endif %};font-weight:700;">
      {{ room.utilization_percent }}%
    </div>
    <div style="font-size:10.5px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.08em;">Utilized</div>
  </div>
</div>

<!-- Amenities -->
<div class="amenities-row">
  {% if room.has_projector  %}<div class="amenity-badge">üìΩ Projector</div>{% endif %}
  {% if room.has_ac         %}<div class="amenity-badge">‚ùÑ Air Conditioned</div>{% endif %}
  {% if room.has_smartboard %}<div class="amenity-badge">üìã Smartboard</div>{% endif %}
  {% if not room.has_projector and not room.has_ac and not room.has_smartboard %}
  <div class="amenity-badge" style="color:var(--slate);">No special amenities listed</div>
  {% endif %}
</div>

<!-- Courses using this room -->
<div class="lpu-card">
  <div class="lpu-card-header">
    <span class="lpu-card-title">Courses Using This Room</span>
    <span style="font-size:12px;color:var(--slate);">{{ courses|length }} active course(s)</span>
  </div>
  <div>
    {% if courses %}
      {% for course in courses %}
      <div class="course-row">
        <span class="cr-code">{{ course.code }}</span>
        <span class="cr-name">{{ course.name }}</span>
        <span class="cr-faculty">
          <i class="bi bi-person"></i>
          {{ course.faculty.user.get_full_name|default:"Unassigned" }}
        </span>
        <span style="font-size:11px;color:var(--slate);">Sem {{ course.semester }}</span>
        <span class="cr-enr">{{ course.enrolled_count }}/{{ course.max_students }}</span>
      </div>
      {% endfor %}
    {% else %}
    <div style="padding:30px;text-align:center;color:var(--slate);font-size:13px;">
      No courses assigned to this room yet.
    </div>
    {% endif %}
  </div>
</div>

{% endblock %}